From: Jason Rhinelander <jason@imaginary.ca>
Date: Mon, 5 Feb 2024 17:23:37 -0400
Subject: Move gnutls_rnd call out of header

Avoids unnecessary application linkage.
---
 include/oxen/quic/connection_ids.hpp | 8 +-------
 src/connection_ids.cpp               | 8 ++++++++
 2 files changed, 9 insertions(+), 7 deletions(-)

diff --git a/include/oxen/quic/connection_ids.hpp b/include/oxen/quic/connection_ids.hpp
index a2e47ed..8063883 100644
--- a/include/oxen/quic/connection_ids.hpp
+++ b/include/oxen/quic/connection_ids.hpp
@@ -64,13 +64,7 @@ namespace oxen::quic
 
         inline bool operator!=(const quic_cid& other) const { return !(*this == other); }
 
-        static quic_cid random()
-        {
-            quic_cid cid;
-            cid.datalen = static_cast<size_t>(NGTCP2_MAX_CIDLEN);
-            gnutls_rnd(GNUTLS_RND_RANDOM, cid.data, cid.datalen);
-            return cid;
-        }
+        static quic_cid random();
 
         std::string to_string() const;
     };
diff --git a/src/connection_ids.cpp b/src/connection_ids.cpp
index 2050869..c8be2bb 100644
--- a/src/connection_ids.cpp
+++ b/src/connection_ids.cpp
@@ -18,4 +18,12 @@ namespace oxen::quic
         return oxenc::to_hex(data, data + datalen);
     }
 
+    quic_cid quic_cid::random()
+    {
+        quic_cid cid;
+        cid.datalen = static_cast<size_t>(NGTCP2_MAX_CIDLEN);
+        gnutls_rnd(GNUTLS_RND_RANDOM, cid.data, cid.datalen);
+        return cid;
+    }
+
 }  // namespace oxen::quic
